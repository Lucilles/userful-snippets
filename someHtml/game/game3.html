<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
input:invalid{
	background: #f00;
}
form{
/*	width: 330px;
	height: 20px;*/
	background: brown;
	padding: 20px;
}




	</style>
</head>
<body onload='init()'>
	<canvas id="mycanvas" width='400px' height="300px"></canvas>
<form action="" name='f' id='f' onSubmit='return change()' />
Horizontal velocity
	<input type="number" name='hv' value='0' max= '10' min='-10'><br>
	Vertical velocity
	<input type="number" name="vv" id='vv' value='8' min='-10' max='10' /> <br>
	<input type="submit" value='CHANGE' />
</form>
<script>
//定义完成特定动作的函数是一个好的习惯
// var boxx = 20;//盒子左上角的位置
// var boxy = 30;//盒子左上角的纵坐标位置
// var boxwidth = 350;//盒子宽度
// var boxheight = 250;//盒子高度
// //var ballrad = 10;//球的半径
// var ballrad = 20;//扩展应用时需要更大的半径
// var boxboundx = boxwidth+boxx-ballrad;//右边界
// var boxboundy = boxheight+boxy-ballrad;//下边界
// var inboxboundx = boxx+ballrad;//左边界
// var inboxboundy = boxy+ballrad;//上边界
// var ballx = 50;//球的初始位置x
// var bally = 60;//球的初始位置y
// var ctx;//画布
// var ballvx = 4;//初始水平位移
// var ballvy = 8;//初始垂直位移
// var img = new Image();
// img.src = '1-1.jpg';
// var grad;//设置grad作为一个变量，会在init函数中为这个变量赋值
// var color;//用于建立梯度grad
// var hue = [[255,0,0],[255,255,0],[0,255,0],
// [0,255,255],[0,0,255],[255,0,255]];
// function init(){
// 	var h;
// 	ctx = document.getElementById('mycanvas').getContext('2d');	
// 	grad = ctx.createLinearGradient(boxx,boxy,boxx+boxwidth,boxy+boxheight);//分别是渐变开始点的坐标和渐变结束点的坐标
// 	for(h = 0;h<hue.length;h++){
// 		color = 'rgb('+hue[h][0]+','+hue[h][1]+','+hue[h][2]+')';
// 		grad.addColorStop(h*1/6,color);//表示渐变开始和结束之间的位置
// 	}
// 	ctx.lineWidth = ballrad;//设置线宽
// 	ctx.fillStyle=grad;
// 	moveball();//第一次调用moveball函数来移动，检查和显示球
// 	setInterval(moveball,100);
// }
// function moveball(){
// 	ctx.clearRect(boxx,boxy,boxwidth,boxheight);
// 	moveandcheck();
// 	ctx.drawImage(img,ballx-ballrad,bally-ballrad,2*ballrad,2*ballrad);//绘制图像
// 	ctx.fillRect(boxx,boxy,ballrad,boxheight);//绘制左墙
// 	ctx.fillRect(boxx+boxwidth-ballrad,boxy,ballrad,boxheight);
// 	ctx.fillRect(boxx,boxy,boxwidth,ballrad);
// 	ctx.fillRect(boxx,boxy+boxheight-ballrad,boxwidth,ballrad)
// 	ctx.beginPath();//开始路径
// 	ctx.arc(ballx,bally,ballrad,0,Math.PI*2,true);//在球的当前位置画圆
// 	//ctx.fill();//填充路径，也就是画一个填充的圆
// 	ctx.strokeRect(boxx,boxy,boxwidth,boxheight);//绘制矩形轮廓
// }
// function moveandcheck(){
// 	var nballx = ballx + ballvx;//设置试探的下一个x位置
// 	var nbally = bally + ballvy;//设置试探的下一个y位置
// 	if(nballx > boxboundx){
// 		ballvx = -ballvx;
// 		nballx = boxboundx;//设置x值等于这个边界
// 	}
// 	if(nballx < inboxboundx){
// 		ballvx = -ballvx;
// 		nballx = inboxboundx;
// 	}
// 	if(nbally > boxboundy){
// 		nbally = boxboundy;
// 		ballvy = -ballvy; 
// 	}
// 	if(nbally < inboxboundy){
// 		ballvy = -ballvy;
// 		nbally = inboxboundy;
// 	}
// 	ballx = nballx;
// 	bally = nbally;
// }
// function change(){
// 	ballvx = Number(f.hv.value);
// 	ballvy = Number(f.vv.value);
// 	return false; //返回false 确保不重新加载页面
// }

//首先定义全局变量，确定球和盒子的位置以及大小
//球的位置和大小
var ballx = 50;
var bally = 60;
var ballrad = 10;
//盒子的位置和大小
var boxx = 20;
var boxy = 30;
var boxwidth = 400;
var boxheight = 500;
//移动的变化量
var ballvx = 4;
var ballvy = 8;
//确定边界的位置 因为墙宽为球的半径
var boxboundx = boxx + boxwidth - ballrad;
var inboxboundx = boxx + ballrad;
var boxboundy = boxy + boxheight -ballrad;
var inboxboundy = boxy + ballrad;
var ctx;
function init(){
ctx = document.getElementById('mycanvas');
ctx.lineWidth = ballrad;
ctx.fillStyle = 'rgb(200,0,50)';
ctx.strokeRect(boxx,boxy,boxwidth,boxheight);
}

</script>

</body>
</html>